# RPGLevels Spigot 1.12.2

Плагин заменяет систему опыта и уровней MineCraft на новую. Теперь количество опыта до нового уровня вы должны задать сами в файле config.yml. При достижении нового уровня плагин единоразово исполняет список команд от имени консоли, {Player} будет заменяться на ник игрока, повысившего уровень.
Добавляется новый параметр игрока - мана. На текущий момент используется предметным тегом **MagicShield**.
Плагин позволяет создавать до 36 классов (групп) игрока. В каждом классе можно задать свою скорость регенерации маны, ХП по умолчанию, маны по умолчанию, а также количество добавляемых ХП и маны при повышении уровня.

### **[config.yml] Конфигурация плагина:**
```yml
firstspawn: world:0:100:0:0:0 //Локация, на которую телепортируются игроки при первом входе.
rpgspawn: world:0:100:0:0:0 //Локация, на которую игроков перемещает при выборе класса.
AutoSaveDataModule: //Модуль сохраняет данные из кеша сервера в базу данных / файл. По умолчанию сохраняет только при входе/выходе игрока.
  enabled: true //Включено или нет.
  period: 5 //Период автосохранения в минутах.
  broadcasted: true //Оповещать ли игроков об этом? Сообщения настраиваются в lang.yml.
StorageType: file //Тип хранения данных. Доступно: mysql, sqlite и file.
MySQLProperties: //Параметры подключения к базе данных. Только для StorageType: mysql.
  ip: localhost //IP базы данных.
  port: 3306 //Порт базы данных.
  user: root //Логин к базе данных.
  password: '*****' //Пароль к базе данных.
  DBname: db_name //Имя базы данных.
Levels: //Создание своих уровней. Создавать можно сколько угодно, каждый следующий уровень должен иметь соотвествующий номер в порядке возрастания.
  '1': //Порядковый номер уровня. Уровень "1" никогда не убирайте!
    commands: {} //Список команд, которые выполняются при повышении уровня игроком. {Player} меняется на ник игрока.
    cost: 0 //Сколько нужно опыта до достижения этого уровня. Для 1 уровня кол-во опыта всегда 0.
  '2':
    cost: 15
    commands:
    - say Плагин работает!
    - pex user {Player} add essentials.fly //Пример выдачи доступа к /fly при достижении 2 уровня.
  '3':
    cost: 71
    commands: {} //Список команд может быть пустой.
```
### **Текущий список возможностей плагина:**

<li>Поддержка перевода всех строк плагина (кроме /level help) в файле lang.yml.
<li>Поддержка file, MySQL и SQlite для хранения данных об игроках и классах.
<li>Редактирование, создание, удаление классов и статистик игроков командами прямо из игры или консоли.
<li>Поддержка работы плагина с оффлайн игроками, которые заходили на сервер хотя бы 1 раз.
<li>Большое API, с помощью которого любой разработчик сможет дополнить плагин по своему вкусу. Так же поддерживаются оффлайн-игроки,
в API имеются русские java-docs для всех методов, так же есть своё событие (Event) - ManaUpdateEvent, которое срабатывает при регенерации маны игрока. Его можно отменить или же отредактировать количество добавляемой маны.
<li>В плагине встроен менеджер тегов (команда /amanage), с помощью которого можно добавить метку со значением String, int или double. Полезно, если Вы хотите
создать предмет с какими-то особыми свойствами.
<li>Плагин имеет несколько предметных тегов по умолчанию (их список ниже). Значение тегов суммируется от предметов надетых в слоты брони и предмета в правой руке.
<li>Встроено специальное меню (команда /level menu), которое работает как креатив режим в MineCraft. Создано для удобного сохранения созданных
кастомных предметов. ПКМ - взять 1 предмет из GUI, Shift+ПКМ - взять стак предметов, ЛКМ - добавить предмет с курсора в меню, Shift+ЛКМ - удалить предмет в меню.
<li>Все существующие команды и их описание можно просматривать в игре командой /level help.

### **Встроенные предметные теги в плагине:**



**Слепота** - если ударить игрока, он получает эффект слепоты из MineCraft, если моба - он временно не может заагриться на игроков.
Добавляется к предмету 2 тегами:
 <li>BlindnessEffectChance - указывается шанс срабатывания эффекта.
 <li>BlindnessEffectTime - указывается время действия эффекта.



**Иммунитет к урону** - при получении урона его часть будет поглащена (не защитит от утопления и падений).
Добавляется к предмету 1 тегом:
<li>DamageAbsorption - указывается количество поглащения. За каждую единицу поглащается 1,5ХП урона.



**Усиление атаки** - когда вы наносите урон врагам, к вашему урону прибавляется случайное значение между минимальным и максимальным значением тега.
Добавляется к предмету 2 тегами:
<li>MinDamageBoost - минимальная планка добавки бонусного урона.
<li>MaxDamageBoost - максимальная планка добавки бонусного урона.



**Поджог** - поджигает врага на указанное время.
Добавляется к предмету 2 тегами:
<li>FireEffectChance - шанс поджога.
<li>FireEffectTime - время горения врага (в секундах).



**Магический щит** - если у игрока достаточно маны, то она будет потрачена на поглащение части урона (Не защитит от утопления и падений).
Добавляется к предмету 1 тегом:
<li>MagicShield - количество поглащения (в int). Каждая единица для поглащения потребует 1 ману, а поглатит 2 урона. К примеру, если на предмете MagicShield 10 - защита сработает если
у игрока будет 10 или более маны и поглатит 20 урона. Если маны не хватает - эффект не срабатывает.



**Яд** - отравляет врага  на указанное время.
Добавляется к предмету 2 тегами:
<li>PoisonEffectChance - указывается шанс срабатывания эффекта.
<li>PoisonEffectTime - время действия яда (в секундах).



**Регенерация** - накладывает эффект регенерации на носителя при наносе урона врагам.
Добавляется к предмету 2 тегами:
<li>RegenerationEffectChance - указывается  шанс срабатывания эффекта.
<li>RegenerationEffectTime - время действия регенерации ХП (в секундах).



**Замедление** - замедляет скорость ходьбы игроков / монстров в % на указанное время.
Добавляется к предмету 3 тегами:
<li>SlownessEffectChance - указывается шанс срабатывания эффекта.
<li>SlownessEffectTime - время действия замедления (в секундах).
<li>SlownessEffectPercent - мощность замедления (в % от 0 до 100).



**Иссушение** - накладывает на врага эффект иссушения на указанное время.
Добавляется к предмету 2 тегами:
<li>WitherEffectChance - указывается шанс срабатывания эффекта.
<li>WitherEffectTime - указывается время действия иссушения (в секундах).



**Хранилище маны** - увеличивает в % ёмкость маны для игрока.
Добавляется к предмету 1 тегом:
<li>ManaStorageBoost - указывается % добавки к текущему лимиту игрока.



**Регенерация маны** - увеличивает скорость регенерации маны в % для игрока.
Добавляется к предмету 1 тегом:
<li>ManaRegenBoost - указывается % добавки к текущей скорости регенерации маны.

#### Пример создания шлема, при ношении которого у вас будет в 2 раза больше хранилище маны и при наносе урона врагу будет накладываться на 10 секунд иссушение с шансом 5.5%:
Берём шлем (по желанию предварительно задаём своё lore, name, нерушимость и т.п.) в руку и пишим команды:

<li>/amanage set ManaStorageBoost 100
<li>/amanage set WitherEffectChance 5.5
<li>/amanage set WitherEffectTime 10

Вот и всё! По желанию сохраняем в /lvl menu созданный предмет.
